# esp8266shizhong
天气时钟
ESP8266 开发板网络时钟和天气 OLED 显示
oled-ssd1315

更新 低电平自锁模式，输出高电平，
esp8266高电平自锁模式，只能gpio16输出才能实现高电平自锁模式

定时开关控制增加了IP显示功能，实现更好的查找地址




显示log图像

        delay(2000); // 暂停2秒


        display.display();
        delay(2000); // 暂停2秒
        display.clearDisplay();


        display.display();
        delay(2000); // 暂停2秒
        display.clearDisplay();


        display.setTextSize(1);
        display.setTextColor(WHITE);
        display.setCursor(0, 0);
        display.println("Initializing...");
        display.display();
        delay(2000); // 暂停2秒
        display.clearDisplay();



在您将ESP8266配置好并上传了上述代码之后，您可以通过手机浏览器输入ESP8266的IP地址来访问控制页面。这个IP地址是ESP8266连接到您的WiFi网络后获得的，可以在串口监视器中看到，或者通过其他网络设备查看。
一旦您知道了ESP8266的IP地址，比如是192.168.1.100，那么您可以在手机浏览器中输入以下网址：
http://192.168.1.100/

这将打开一个简单的网页，上面有四个链接，分别用于控制两个继电器的开关状态：
•  打开继电器1（四路）：http://192.168.1.100/relay1?state=1
•  关闭继电器1（四路）：http://192.168.1.100/relay1?state=0
•  打开继电器2（五路）：http://192.168.1.100/relay2?state=1
•  关闭继电器2（五路）：http://192.168.1.100/relay2?state=0
您只需在浏览器中访问这些网址，就可以远程控制继电器的开关状态，并且这些状态会实时显示在连接到ESP8266的OLED屏幕上。

millis() 函数介绍

1. millis() 函数介绍
在 Arduino 以及基于类似开发环境（像 ESP8266、ESP32 等平台常用的开发环境）中，millis() 函数用于获取从设备启动（复位）开始到当前所经过的时间，单位是毫秒。它返回的是一个 unsigned long 类型的数值。
这个函数常被用于实现非阻塞式的定时操作，与传统的 delay() 函数有所不同。delay() 函数会让程序暂停执行（阻塞）指定的时长，在这个时间段内不能做其他事情；而 millis() 函数则允许在程序继续运行其他代码的同时，通过比较时间差值来判断是否达到了设定的定时时长，从而执行相应的操作，这样可以让程序更加高效、灵活地实现多任务逻辑。
2. 简单示例 - 实现周期性定时执行操作
以下是一个简单示例，展示如何利用 millis() 函数来实现每隔一定时间（比如每隔 1000 毫秒，也就是 1 秒）让一个 LED 闪烁一次：

SPIFFS 文件系统介绍

SPIFFS（SPI Flash File System）是一种用于嵌入式设备的轻量级文件系统，常用于像 ESP8266、ESP32 等基于 SPI 接口的闪存芯片上，以方便在这些设备上进行文件的存储和读取操作。以下是关于 SPIFFS 文件系统更详细的介绍：
1. 特点
轻量级：它的设计比较简洁，代码占用空间相对较小，很适合资源有限的嵌入式设备使用，不会消耗过多的芯片内存和闪存资源。
基于 SPI 闪存：能够直接操作设备上的 SPI 接口闪存，将其划分为不同的区域来管理文件，像存储设备配置信息、网页页面文件（在搭建简单网页服务器应用场景下）、传感器数据记录等各种需要持久化保存的数据都可以放在 SPIFFS 中。
简单易用：提供了一套相对简单的文件操作接口，比如创建文件、读取文件、写入文件、删除文件等功能，开发者可以方便地通过调用相应函数来实现对文件的管理。
2. 常见应用场景
保存设备配置信息：例如在你之前提到的控制继电器以及设置定时任务的代码示例中，利用 SPIFFS 保存继电器的开关状态、定时任务的相关设置（开始时间、结束时间、是否启用定时等参数），这样下次设备上电时就可以从 SPIFFS 中读取这些信息，恢复到之前的工作状态，而不需要用户重新设置一遍。
存储网页资源：如果要在 ESP8266 等设备上搭建一个小型的 Web 服务器，提供网页界面给用户交互，可以把 HTML、CSS、JavaScript 等网页文件存放在 SPIFFS 中，当客户端发起请求时，服务器从 SPIFFS 中读取相应文件内容并发送给客户端，展示出对应的网页页面。
记录数据日志：在一些数据采集的应用场景里，比如传感器每隔一段时间采集环境温度、湿度等数据，这些数据可以按一定格式写入 SPIFFS 中的文件里，后续可以通过合适的方式（如从设备取出闪存芯片连接到电脑，或者通过网络传输等手段）获取这些数据文件进行分析查看。

清除配置引脚为2脚（D4）
正常来说，如果想通过外部电路来实现类似功能，外部上拉电阻一般取值在几千欧到几十千欧之间（比如常用的 10KΩ），连接在引脚和电源（比如 3.3V）之间，按键一端接引脚，另一端接地。当按键按下时，引脚电平被拉低，没按下时引脚通过上拉电阻保持高电平，以此实现稳定的电平变化检测。
而你用 330 欧电阻接地，会让引脚一直处于接近低电平的状态，无法实现正常的电平切换来准确表示按键按下与否，并且很可能会影响到整个芯片引脚的正常电气特性以及相关电路功能，导致无法正确触发清除操作或者出现其他异常情况呀，建议还是按照正确的电路连接方式，添加合适的上拉电阻（接电源侧）来搭建按键电路哦。
